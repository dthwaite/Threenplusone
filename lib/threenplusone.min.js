!function(){function t(t){if(this.value=[],"number"==typeof t&&!isNaN(t)&&t>=0){t=Math.floor(t);for(var e=0;t>0;e++)this.value.push(t),this.value[e]>=o?(t=Math.floor(this.value[e]/o),this.value[e]%=o):t=0}this._iterate()}var e=50,o=Math.pow(2,e);t.testmode=!1,t.prototype.random=function(e){if(this.value=[],"number"==typeof e&&e>0){for(var h=Math.log(o)/Math.log(10);e>h;)this.value.push(Math.floor((t.testmode?.33:Math.random())*o)),e-=h;this.value.push(1+Math.floor((t.testmode?.77:Math.random())*Math.pow(10,e))),this._iterate()}return this},t.prototype.add=function(e){if(e instanceof t){for(var h=0,i=0;i<e.value.length||h>0;i++)i<e.value.length&&(h+=e.value[i]),this.value.length==i?this.value.push(h):this.value[i]+=h,this.value[i]>=o?(h=Math.floor(this.value[i]/o),this.value[i]%=o):h=0;this._iterate()}return this},t.prototype.toString=function(){var t=1+Math.floor(((this.value.length-1)*Math.log(o)+Math.log(this.value[this.value.length-1]))/Math.log(10)),e="big";return 1==this.value.length&&(e=this.value[0]),"Digits: "+t+"("+e+") Ups: "+this.ups+" Downs: "+this.downs},t.prototype._iterate=function(){function t(t){for(var e=0;e<h.length;e++)h[e]*=3,h[e]+=t,h[e]>=o?(t=Math.floor(h[e]/o),h[e]%=o):t=0;t&&h.push(t)}if(this.ups=0,this.downs=0,0!=this.value.length){for(var h=this.value.slice(),i=1;;){for(;0==h[0];)h.shift(),this.downs+=e,i=1;for(;h[0]%(2*i)==0;)i*=2;if(h[0]==i&&1==h.length)break;t(i),this.ups++}this.downs+=Math.round(Math.log(i)/Math.log(2))-this.ups}},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t:"function"==typeof define&&define.amd?define(["ThreeNplus1"],t):"undefined"!=typeof window&&(window.ThreeNplus1=t)}();